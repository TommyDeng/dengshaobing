<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<sqls>
	<sql name="BUSS001">
	<![CDATA[
SELECT UNIQUE_CODE FROM TX_USER where OPENID = :OPENID 
	]]>
	</sql>

	<sql name="BUSS002">
	<![CDATA[
select UNIQUE_CODE as UNIQUE_CODE$K$H,
       SUMMARY 订单,
       TOTAL_AMT 金额,
       STATUS 状态,
       to_char(CREATE_TIME, 'yyyy-MM-dd hh:mm:ss') 创建时间
  from TX_ORDER
 where USER_UC = :USER_UC
   order by CREATE_TIME desc
	]]>
	</sql>

	<sql name="BUSS003">
	<![CDATA[
select p.name as 产品名称, oi.PRODUCT_COUNT as 数量, oi.TOTAL_AMT as 金额
  from TX_ORDER_ITEM oi
  left join TX_PRODUCT p
    on oi.PRODUCT_UC = p.UNIQUE_CODE
 where oi.ORDER_UC = :ORDER_UC
	]]>
	</sql>

	<sql name="BUSS004">
	<![CDATA[
SELECT UNIQUE_CODE as UNIQUE_CODE$K$H, NAME as 名称,PRICE as 单价, to_char(CREATE_TIME, 'yyyy-MM-dd hh:mm:ss') 创建时间  FROM TX_PRODUCT 
	]]>
	</sql>

	<sql name="BUSS005">
	<![CDATA[
delete from TX_ORDER_ITEM where ORDER_UC = :ORDER_UC 
	]]>
	</sql>

	<sql name="BUSS006">
	<![CDATA[
SELECT p.*, f.PATH THUMBNAIL_PATH
  FROM TX_PRODUCT p
  left join TX_FILE_STORE_MAPPING f
    on p.THUMBNAIL = f.UNIQUE_CODE
 where p.UNIQUE_CODE = :UNIQUE_CODE
	]]>
	</sql>

	<sql name="BUSS007">
	<![CDATA[
SELECT count(1) FROM TX_SHOPPING_CART  where USER_UC  = :USER_UC 
	]]>
	</sql>

	<sql name="BUSS008">
	<![CDATA[
SELECT PRODUCT_COUNT
  FROM TX_SHOPPING_CART
 where USER_UC = :USER_UC
   and PRODUCT_UC = :PRODUCT_UC
   	]]>
	</sql>

	<sql name="BUSS009">
	<![CDATA[
MERGE INTO TX_SHOPPING_CART(UNIQUE_CODE, USER_UC, PRODUCT_UC, PRODUCT_COUNT)
 KEY(USER_UC, PRODUCT_UC)
values(:UNIQUE_CODE, :USER_UC, :PRODUCT_UC, :PRODUCT_COUNT)
   	]]>
	</sql>

	<sql name="BUSS010">
	<![CDATA[
SELECT S.UNIQUE_CODE AS UNIQUE_CODE$K$H,
       P.UNIQUE_CODE AS UNIQUE_CODE$H,
       P.NAME 名称$L,
       P.PRICE 单价,
       CONVERT(S.PRODUCT_COUNT, INT) 数量,
       P.PRICE * S.PRODUCT_COUNT 小计
  FROM TX_SHOPPING_CART S, TX_PRODUCT P
 WHERE S.PRODUCT_UC = P.UNIQUE_CODE
   AND S.USER_UC = :USER_UC
	]]>
	</sql>

	<sql name="BUSS011">
	<![CDATA[
SELECT U.UNIQUE_CODE
  FROM TX_USER U, TX_USERINFO_WX W
 WHERE U.UNIQUE_CODE = W.UNIQUE_CODE
   AND W.OPENID = :OPENID
	]]>
	</sql>
	<sql name="BUSS012">
	<![CDATA[
SELECT p.*, f.PATH THUMBNAIL_PATH
  FROM TX_PRODUCT p
  left join TX_FILE_STORE_MAPPING f
    on p.THUMBNAIL = f.UNIQUE_CODE
	]]>
	</sql>
</sqls>