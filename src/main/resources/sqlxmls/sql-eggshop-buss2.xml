<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<sqls>
	<sql name="ES_BUSS001">
	<![CDATA[
SELECT t.PRODUCT_UC ,m.PATH FROM ES_MAIN_SWIPER t,
SYS_FILE_STORE_MAPPING m 
where t.THUMBNAIL = m.UNIQUE_CODE
and  (t.VALID_TIME is null or t.VALID_TIME > sysdate)
order by ORDER_NUM 
LIMIT 10
	]]>
	</sql>

	<sql name="ES_BUSS002">
	<![CDATA[
SELECT p.UNIQUE_CODE ,p.NAME ,m.PATH ,count(1) SALECOUNT FROM ES_PRODUCT p left join ES_ORDER_ITEM i on p.UNIQUE_CODE =i.PRODUCT_UC 
left join SYS_FILE_STORE_MAPPING m on p.THUMBNAIL =m.UNIQUE_CODE 
group by p.UNIQUE_CODE 
order by salecount desc
LIMIT 5
	]]>
	</sql>
	
	<sql name="ES_BUSS003">
	<![CDATA[
SELECT p.UNIQUE_CODE ,p.NAME ,p.BRIEF , m.PATH FROM ES_PRODUCT p 
left join SYS_FILE_STORE_MAPPING m on p.THUMBNAIL =m.UNIQUE_CODE 
order by p.CREATE_TIME desc
LIMIT 15
	]]>
	</sql>

	<sql name="ES_BUSS004">
	<![CDATA[
SELECT c.UNIQUE_CODE, c.NAME ,c.REMARK ,m.PATH  FROM ES_PRODUCT_CATEGORY c 
left join SYS_FILE_STORE_MAPPING m on c.THUMBNAIL = m.UNIQUE_CODE 
order by c.ORDER_NUM 
	]]>
	</sql>

	<sql name="ES_BUSS005">
	<![CDATA[
SELECT P.UNIQUE_CODE ,P.NAME ,P.BRIEF , M.PATH
FROM ES_PRODUCT P 
LEFT JOIN ES_PRODUCT_CATEGORY C ON P.CATEGORY  = C.UNIQUE_CODE 
LEFT JOIN SYS_FILE_STORE_MAPPING M ON P.THUMBNAIL =M.UNIQUE_CODE 
WHERE P.CATEGORY = :CATEGORY OR :CATEGORY IS NULL
LIMIT 100
	]]>
	</sql>
	
	<sql name="ES_BUSS006">
	<![CDATA[
SELECT p.UNIQUE_CODE  ,p.NAME ,p.PRICE, p.CATEGORY, p.BRIEF, p.DETAIL_DESCIPTION, p.CREATE_TIME
  FROM ES_PRODUCT p
 where p.UNIQUE_CODE = :UNIQUE_CODE
 	]]>
	</sql>
	
	<sql name="ES_BUSS007">
	<![CDATA[
SELECT PRODUCT_COUNT
  FROM ES_SHOPPING_CART
 where USER_UC = :USER_UC
   and PRODUCT_UC = :PRODUCT_UC
   	]]>
	</sql>

	<sql name="ES_BUSS008">
	<![CDATA[
MERGE INTO ES_SHOPPING_CART(UNIQUE_CODE, USER_UC, PRODUCT_UC, PRODUCT_COUNT)
 KEY(USER_UC, PRODUCT_UC)
values(:UNIQUE_CODE, :USER_UC, :PRODUCT_UC, :PRODUCT_COUNT)
   	]]>
	</sql>

	<sql name="ES_BUSS009">
	<![CDATA[
SELECT sum(PRODUCT_COUNT) FROM ES_SHOPPING_CART where USER_UC  = :USER_UC 
	]]>
	</sql>
	
	<sql name="ES_BUSS010">
	<![CDATA[
SELECT S.UNIQUE_CODE AS UNIQUE_CODE,
       P.UNIQUE_CODE AS PRODUCT_UC,
       P.NAME,
       P.PRICE,
       TRUNCATE(S.PRODUCT_COUNT, 0) PRODUCT_COUNT,
       TRUNCATE(P.PRICE * S.PRODUCT_COUNT,2) SUM_AMOUNT
  FROM ES_SHOPPING_CART S, ES_PRODUCT P
 WHERE S.PRODUCT_UC = P.UNIQUE_CODE
   AND S.USER_UC = :USER_UC
	]]>
	</sql>
</sqls>